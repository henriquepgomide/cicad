(function(d,c){if(typeof exports=="object"){module.exports=c()}else{if(false&&typeof define=="function"&&define.amd){define(c)}else{d.Spinner=c()}}})(this,function(){var u=["webkit","Moz","ms","O"],m={},r;function i(k,j){var b=document.createElement(k||"div"),g;for(g in j){b[g]=j[g]}return b}function h(j){for(var g=1,b=arguments.length;g<b;g++){j.appendChild(arguments[g])}return j}var o=function(){var b=i("style",{type:"text/css"});h(document.getElementsByTagName("head")[0],b);return b.sheet||b.styleSheet}();function t(y,w,v,x){var g=["opacity",w,~~(y*100),v,x].join("-"),k=0.01+v/x*100,q=Math.max(1-(1-y)/w*(100-k),y),b=r.substring(0,r.indexOf("Animation")).toLowerCase(),j=b&&"-"+b+"-"||"";if(!m[g]){o.insertRule("@"+j+"keyframes "+g+"{0%{opacity:"+q+"}"+k+"%{opacity:"+y+"}"+(k+0.01)+"%{opacity:1}"+(k+w)%100+"%{opacity:"+y+"}100%{opacity:"+q+"}}",o.cssRules.length);m[g]=1}return g}function d(k,b){var j=k.style,g,q;b=b.charAt(0).toUpperCase()+b.slice(1);for(q=0;q<u.length;q++){g=u[q]+b;if(j[g]!==undefined){return g}}if(j[b]!==undefined){return b}}function n(j,g){for(var b in g){j.style[d(j,b)||b]=g[b]}return j}function s(k){for(var j=1;j<arguments.length;j++){var b=arguments[j];for(var g in b){if(k[g]===undefined){k[g]=b[g]}}}return k}function a(b){var g={x:b.offsetLeft,y:b.offsetTop};while(b=b.offsetParent){g.x+=b.offsetLeft,g.y+=b.offsetTop}return g}function f(b,g){return typeof b=="string"?b:b[g%b.length]}var l={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto",position:"relative"};function e(b){if(typeof this=="undefined"){return new e(b)}this.opts=s(b||{},e.defaults,l)}e.defaults={};s(e.prototype,{spin:function(k){this.stop();var A=this,b=A.opts,v=A.el=n(i(0,{className:b.className}),{position:b.position,width:0,zIndex:b.zIndex}),j=b.radius+b.length+b.width,w,E;if(k){k.insertBefore(v,k.firstChild||null);E=a(k);w=a(v);n(v,{left:(b.left=="auto"?E.x-w.x+(k.offsetWidth>>1):parseInt(b.left,10)+j)+"px",top:(b.top=="auto"?E.y-w.y+(k.offsetHeight>>1):parseInt(b.top,10)+j)+"px"})}v.setAttribute("role","progressbar");A.lines(v,A.opts);if(!r){var z=0,g=(b.lines-1)*(1-b.direction)/2,y,C=b.fps,D=C/b.speed,x=(1-b.opacity)/(D*b.trail/100),B=D/b.lines;(function q(){z++;for(var F=0;F<b.lines;F++){y=Math.max(1-(z+(b.lines-F)*B)%D*x,b.opacity);A.opacity(v,F*b.direction+g,y,b)}A.timeout=A.el&&setTimeout(q,~~(1000/C))})()}return A},stop:function(){var b=this.el;if(b){clearTimeout(this.timeout);if(b.parentNode){b.parentNode.removeChild(b)}this.el=undefined}return this},lines:function(j,b){var g=0,q=(b.lines-1)*(1-b.direction)/2,v;function k(x,w){return n(i(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:x,boxShadow:w,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*g+b.rotate)+"deg) translate("+b.radius+"px,0)",borderRadius:(b.corners*b.width>>1)+"px"})}for(;g<b.lines;g++){v=n(i(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:r&&t(b.opacity,b.trail,q+g*b.direction,b.lines)+" "+1/b.speed+"s linear infinite"});if(b.shadow){h(v,n(k("#000","0 0 4px #000"),{top:2+"px"}))}h(j,h(v,k(f(b.color,g),"0 0 1px rgba(0,0,0,.1)")))}return j},opacity:function(j,g,b){if(g<j.childNodes.length){j.childNodes[g].style.opacity=b}}});function p(){function b(j,g){return i("<"+j+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',g)}o.addRule(".spin-vml","behavior:url(#default#VML)");e.prototype.lines=function(g,j){var q=j.length+j.width,w=2*q;function x(){return n(b("group",{coordsize:w+" "+w,coordorigin:-q+" "+-q}),{width:w,height:w})}var z=-(j.width+j.length)*2+"px",k=n(x(),{position:"absolute",top:z,left:z}),y;function v(C,A,B){h(k,h(n(x(),{rotation:360/j.lines*C+"deg",left:~~A}),h(n(b("roundrect",{arcsize:j.corners}),{width:q,height:j.width,left:j.radius,top:-j.width>>1,filter:B}),b("fill",{color:f(j.color,C),opacity:j.opacity}),b("stroke",{opacity:0}))))}if(j.shadow){for(y=1;y<=j.lines;y++){v(y,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(y=1;y<=j.lines;y++){v(y)}return h(g,k)};e.prototype.opacity=function(q,k,v,j){var g=q.firstChild;j=j.shadow&&j.lines||0;if(g&&k+j<g.childNodes.length){g=g.childNodes[k+j];g=g&&g.firstChild;g=g&&g.firstChild;if(g){g.opacity=v}}}}var c=n(i("group"),{behavior:"url(#default#VML)"});if(!d(c,"transform")&&c.adj){p()}else{r=d(c,"animation")}return e});