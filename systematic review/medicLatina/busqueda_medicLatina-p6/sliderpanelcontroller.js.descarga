(function(b){ep.require(["ep/dualslider.js","spinner/spin.min.js"],function(){ep.registerClass("ep.base.SliderPanelController",{panelElement:null,panel:null,onDomLoad:function(){this.panel=jQuery("#"+this.panelElement);this.bindEvents()},bindEvents:function(){this.panel.find(".limControl").click(jQuery.proxy(this.formSubmit,this));this.panel.find(".limCaption a").click(jQuery.proxy(this.limiterLinkClickHandler,this));this.panel.bind("ep_DualSlider_sliderChanged.modalpanel",jQuery.proxy(this.formSubmit,this))},limiterLinkClickHandler:function(a){var e=jQuery(a.target);var f=e.closest("li").find("input");f.prop("checked",!f.prop("checked"));this.formSubmit()},formSubmit:function(){var a=this.panel.find(".controls input");if(a&&a.length>0&&a[0].name){this.showLoading();__doPostBack(a[0].name,"")}},showLoading:function(){this._layoutScreen();this.coverScreen.fadeTo(200,0.5);this.loadingMessage.show()},_layoutScreen:function(){if(!this.coverScreen){this.coverScreen=b("#modal-screen")}if(!this.coverScreen.length){this.coverScreen=b("<div>").attr("id","modal-screen").addClass("ui-widget-overlay").css("z-index",9000).hide()}b("body").append(this.coverScreen);var h={height:jQuery(window).height(),width:jQuery(window).width()};var j={height:jQuery(document).height(),width:jQuery(document).width()};j.height=j.height>h.height?j.height:h.height;j.width=j.width>h.width?j.width:h.width;this.coverScreen.css({top:"0",left:"0px",height:j.height+"px",width:j.width+"px"});if(!this.loadingMessage){this.loadingMessage=b("#modal-loading")}if(!this.loadingMessage.length){this.loadingMessage=b("<div>").attr({id:"modal-loading",tabIndex:"0","data-auto":"spinner"}).hide();var a=b("<div>").addClass("container").append("<span>Updating...</span>");var i={lines:9,length:4,width:2,radius:2,corners:1,rotate:13,direction:1,color:"#000",speed:0.8,trail:65,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:"0px",left:"auto"};var g=new Spinner(i).spin(a.get(0));this.loadingMessage.append(a)}b("body").append(this.loadingMessage);this.loadingMessage.addClass("modal-loading").css({position:"fixed",top:((h.height/2)-(this.loadingMessage.outerHeight()/2))+"px",left:((h.width/2)-(this.loadingMessage.outerWidth()/2))+"px"})}},"ep.base.Controller")})})(jQuery);